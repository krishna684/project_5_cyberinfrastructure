<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id=":3(P~D/fvFmBVKypE*r$">isDistressMode</variable><variable id="6pVvn!dba|Vn,Z=OnHH!">incomingRSSI</variable><variable id="8,iKCHvExL##NW_6QHA9">isRescuing</variable><variable id="@]1Ev|(WJU{rs=Wwy*mv">targetId</variable><variable id="O8cM~^Cc`WuLJF#(lsP@">currentRSSI</variable><variable id="XZ%@b!2${Pr,%yQjhLZH">lastBeaconTime</variable><variable id="-acfJr$G1BJ:z},A3h.l">z</variable><variable id="Ma{5GoozN/A0d11sx7h}">MY_SERIAL</variable><variable id=")!^lz7al^`d+Cd_SUL}J">searchStartTime</variable><variable id=";y}qIJzoiKZ`4=pPtSxY">MAX_SEARCH_TIME</variable><variable id="5f`3Xaz`#bg^#wdR=4[]">initialSignal</variable><variable id="s1[*zyFw;4o8{iRiB0=y">RSSI_ARRIVED_THRESH</variable><variable id="tG?JpSqhE+3}ZnhN8J_O">bestDir</variable><variable id="OMXn6z^t;g(Exv}r6ZQA">newSignal</variable><variable id="9cN7!O}J,Uu7.LZ8wfhV">startSignal</variable><variable id="HR1I+=YDK+n8#l9Lh?`+">leftScore</variable><variable id="QhL[/R~i-(!j,_0nB1=@">rightScore</variable><variable id="Y-u`@JEr/s_]RW0$_}{{">sum</variable><variable id="|3!HfBThC{%:Z9,Ke,UG">count</variable><variable id="9N:U69l`G*30vtY}pdz~">RADIO_GROUP</variable><variable id="uE2RN)Uc7O$6l4P44MT3">SOUND_THRESHOLD</variable><variable id="f]|?jHHAA8Z,J]rl)ZE$">W_SOUND</variable><variable id="Muqx5yN%4kX|MHAwU%M$">W_RSSI</variable></variables><comment id="r:SHwC|1%xc(|We;dJ~:" x="3374" y="1209" w="160" h="120">
Track the target
</comment><block type="pxt-on-start" id="Q8jOPbrBze=Jz#9bDynf" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="B8$/B{VDAvK%M4.aSpmY"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let isDistressMode = false" numlines="1" declaredvars="isDistressMode"></mutation><comment pinned="false" h="80" w="160">====== STATE VARIABLES ======</comment><next><block type="variables_set" id="P6Mf,g|EZ;:`=7i2m)A="><field name="VAR" id="9N:U69l`G*30vtY}pdz~">RADIO_GROUP</field><comment pinned="false" h="80" w="160">====== CONFIGURATION ======</comment><value name="VALUE"><shadow type="math_number" id="G5d-$=,Y{L|brb@=*k/B"><field name="NUM">17</field></shadow></value><next><block type="variables_set" id="*4v.4QRu-1hes@*q8%:a"><field name="VAR" id="Ma{5GoozN/A0d11sx7h}">MY_SERIAL</field><value name="VALUE"><shadow type="math_number" id="mljHs/)7avjX`{:dTE[R"><field name="NUM">0</field></shadow><block type="control_device_serial_number" id="$Wr=D|{^r1-6omKKUQyX"></block></value><next><block type="variables_set" id="N;NLk+72PI)_i^^_?#^I"><field name="VAR" id="uE2RN)Uc7O$6l4P44MT3">SOUND_THRESHOLD</field><comment pinned="false" h="80" w="160">====== TUNING CONSTANTS ======
Louder threshold for sound</comment><value name="VALUE"><shadow type="math_number" id="2#5O?/n=j|iox-4hERi`"><field name="NUM">80</field></shadow></value><next><block type="variables_set" id="sMAmV5`bVKishY:L,h*`"><field name="VAR" id="s1[*zyFw;4o8{iRiB0=y">RSSI_ARRIVED_THRESH</field><comment pinned="false" h="80" w="160">-50 is VERY close</comment><value name="VALUE"><shadow type="math_number" id="1w3fl943:|^mVvu+wtv@"><field name="NUM">-50</field></shadow></value><next><block type="variables_set" id="b}Oz3}VS@(f8p+AtuUQ4"><field name="VAR" id=";y}qIJzoiKZ`4=pPtSxY">MAX_SEARCH_TIME</field><comment pinned="false" h="80" w="160">10 seconds timeout</comment><value name="VALUE"><shadow type="math_number" id="Ab?QSXo9Z7Qg(uX_Ld8X"><field name="NUM">10000</field></shadow></value><next><block type="variables_set" id="5RAQz_z#~Aoq,H?8k2qx"><field name="VAR" id="f]|?jHHAA8Z,J]rl)ZE$">W_SOUND</field><comment pinned="false" h="80" w="160">Weights: We now trust Radio (RSSI) more than sound for direction</comment><value name="VALUE"><shadow type="math_number" id="}?/w4o#Pia_wbG@l]uxz"><field name="NUM">0.3</field></shadow></value><next><block type="variables_set" id="dko@]}Gj(@,,Yi!+*_`_"><field name="VAR" id="Muqx5yN%4kX|MHAwU%M$">W_RSSI</field><value name="VALUE"><shadow type="math_number" id="Y=]}3DN..%7J.E~.kujS"><field name="NUM">0.7</field></shadow></value><next><block type="variables_set" id="2nEGy:6M_@:NxVvdfw^+"><field name="VAR" id="O8cM~^Cc`WuLJF#(lsP@">currentRSSI</field><comment pinned="false" h="80" w="160">Raw value from radio</comment><value name="VALUE"><shadow type="math_number" id="ZXH9JO!-xcf*H_u{%uv`"><field name="NUM">-100</field></shadow></value><next><block type="radio_set_group" id="Q^w]5gDn_/Z=s^_GTA;$"><comment pinned="false" h="80" w="160">Setup</comment><value name="ID"><shadow type="math_number_minmax" id="R{01X^MtGNE#4f:.O^vv"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="+sp5I#{jbmiq,rQsFSnR"><field name="VAR" id="9N:U69l`G*30vtY}pdz~">RADIO_GROUP</field></block></value><next><block type="radio_set_transmit_power" id="ym{$}ZyzERK;0jM+Xej4"><value name="power"><shadow type="math_number_minmax" id="SPB9fI2IA4AQEATyhO_{"><mutation min="0" max="7" precision="0"></mutation><field name="SLIDER">7</field></shadow></value><next><block type="function_call" id="|Q#k[wr5b.%M6ulDb`xD"><mutation name="calmLights" functionid="47Q2BVG5eHVkeh%W51mC"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="control_in_background" id=",y/]r%$F%JJk77xe;P1$" x="486" y="20"><comment pinned="false" h="80" w="160">==========================================
=== 2. VICTIM LOGIC (UNCHANGED)
==========================================</comment><statement name="HANDLER"><block type="device_while" id="loCoS)6]MWQns%W8xSO,"><value name="COND"><shadow type="logic_boolean" id="VD2o:UAThdMY=a^J|kX^"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="variables_set" id="H(J:[wOgTZ*W6gk3KDy9"><field name="VAR" id="-acfJr$G1BJ:z},A3h.l">z</field><value name="VALUE"><shadow type="math_number" id="Ef:N98rp5_;,1xFd0.LM"><field name="NUM">0</field></shadow><block type="device_acceleration" id="Z@L88KWtqQD!bV,+}VLH"><field name="NAME">Dimension.Z</field></block></value><next><block type="controls_if" id="E.+ZjyA=xTYyNN~?N*qX"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">Safety Check: Don't flip out if we are driving (Rescuing)</comment><value name="IF0"><shadow type="logic_boolean" id="6DdfS}eEg4geDdA{i(a#"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="/pkv*;;IQ=OU3I-ST:vA"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="0|gnD$RW1L[@`jpA[X[n"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="25a|-dA7LGWZ?,0$_@yi"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="LoRbAO/wF/_=?wEX:Z3f"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="lv*5zf,]WT~6l%4}B[L3"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="n`ehPi`:98_#W=:%7WW_"><field name="NUM">0</field></shadow><block type="variables_get" id="}R%q%Wj22J~Q%rm2Db5$"><field name="VAR" id="-acfJr$G1BJ:z},A3h.l">z</field></block></value><value name="B"><shadow type="math_number" id="_#8I5-3EE[GOVQgf%Ds5"><field name="NUM">-600</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="e8cq,XCD.(-`k#cBK-+/"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="{{4V{Gl?w[Q}ZDKZkY6H"><value name="BOOL"><shadow type="logic_boolean" id="1p81//sL(#)pR:9h6/C;"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="/BF-|3N%PoR,mF)BAu3f"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field></block></value></block></value></block></value><value name="B"><shadow type="logic_boolean" id="7O/=6xvYOs_qEEaaGIoO"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="mg4P09w6KE9+I6N~0aub"><value name="BOOL"><shadow type="logic_boolean" id="+FE7(+M9Weo?5_bl0|KN"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="cL7-*hU9iTc`Ga~c6=V."><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field></block></value></block></value></block></value><statement name="DO0"><block type="function_call" id="+YnzC$F_wwH61Ywc/xJQ"><mutation name="becomeVictim" functionid="J!A}Sd%QqdA%*Q7GW4H("></mutation></block></statement><value name="IF1"><shadow type="logic_boolean" id="|,afp,}wg@f;P(H*7Yp/"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id=",l%_7*{!!csRIuq:#Ugn"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="x^JXw!Jwls@0#isF|;:i"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="by|}R22kS@j|~^X,l9tm"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="O[n1~(|QmG-_/}^MLQbP"><field name="NUM">0</field></shadow><block type="variables_get" id="miC!$q42)`q^R)DW[#_j"><field name="VAR" id="-acfJr$G1BJ:z},A3h.l">z</field></block></value><value name="B"><shadow type="math_number" id="+7V^04_8zbR`DkXN}:j{"><field name="NUM">200</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="0v]~i=raY[$6B8vxp[:Z"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="]NP#L_A0EfbC![1_.1eb"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field></block></value></block></value><statement name="DO1"><block type="function_call" id=".SlC0T$hnoPoIqV!aWPv"><mutation name="becomeSafe" functionid="gIwrgDaxrrbT:HJk8j[%"></mutation></block></statement><next><block type="device_pause" id="d%+!ss__YCXE3_7W83mM"><value name="pause"><shadow type="timePicker" id="+}hj,GBEiYl(4wHuJqAC"><field name="ms">50</field></shadow></value></block></next></block></next></block></statement></block></statement></block><block type="radio_on_value_drag" id="G)cJ0p#z]3?Jn7knW?$n" x="1556" y="20"><comment pinned="false" h="80" w="160">==========================================
=== 1. RADIO HANDLER
==========================================</comment><value name="HANDLER_DRAG_PARAM_name"><block type="argument_reporter_string" id="zS!LpX%zBXr@V0`htcpX" deletable="false"><field name="VALUE">name</field></block></value><value name="HANDLER_DRAG_PARAM_value"><block type="argument_reporter_number" id="6Y`=58ic7#1!iM`*20DG" deletable="false"><field name="VALUE">value</field></block></value><statement name="HANDLER"><block type="controls_if" id="9g-8dd]]3/:--JRYO~(U"><value name="IF0"><shadow type="logic_boolean" id="osI}[/Sj4{S7jJ:zqlyJ"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="G6u:I`kMemU5Y|{agH!T"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field></block></value><statement name="DO0"><block type="typescript_statement" id="c#e@HQ8D,s%DD.ZoyQ]q"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return;" numlines="1"></mutation></block></statement><next><block type="variables_set" id="B(tFp@=SU6i^.H4v}_4]"><field name="VAR" id="6pVvn!dba|Vn,Z=OnHH!">incomingRSSI</field><value name="VALUE"><shadow type="math_number" id="}s/|IcF~;ew3Dn;I6jas"><field name="NUM">0</field></shadow><block type="radio_received_packet" id="jMSfbGC]{VuAqf-gqu!~"><value name="type"><shadow type="radio_packet_property" id="i{v9s(hfw.tSs*zS_[b;"><field name="note">RadioPacketProperty.SignalStrength</field></shadow></value></block></value><next><block type="controls_if" id="M,Q3x6NH*]4mznNCbYp!"><mutation elseif="2"></mutation><value name="IF0"><shadow type="logic_boolean" id="9S-||=Vxoqq-_LL%:iy{"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="T@o#4GI/p[.GLN]gsL^L"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="H2XB*tWvsn-Ed8R]NjiB"><field name="NUM">0</field></shadow><block type="argument_reporter_string" id="dg.WQB_ZxB+!t(^l,Da:"><field name="VALUE">name</field></block></value><value name="B"><shadow type="math_number" id="J07I9aG-_*mh0]|LlHCI"><field name="NUM">0</field></shadow><block type="text" id="Vi^PLX~kcMLHOhsYq,ih"><field name="TEXT">ALERT</field></block></value></block></value><statement name="DO0"><block type="controls_if" id="7;s.`N+jW+6VQ_mYv?Yk"><value name="IF0"><shadow type="logic_boolean" id="h|`O[_B05)?*_41nNBp!"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="q,rTc.?M6n3Q_nMod|h6"><value name="BOOL"><shadow type="logic_boolean" id="^V#r]blXTcu4x+%Qz!#5"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="a([g@U#8wqnpjDFWqk`R"><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="CI~9LE2$soc{KxV3Hr6A"><field name="VAR" id="@]1Ev|(WJU{rs=Wwy*mv">targetId</field><value name="VALUE"><shadow type="math_number" id="e^n_TebF7(qiXw!3o8!O"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Ccl/`ZH2d%X_E,L=]*:E"><field name="VALUE">value</field></block></value><next><block type="function_call" id="r[CldYGiW0iB+Ro49!WE"><mutation name="startRescueRoutine" functionid="z[)ADJt5Yt-0s2|~0mWS"></mutation><comment pinned="false" h="80" w="160">Start the new logic</comment></block></next></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean" id="A7m3E)Ln1oG%iaA`=tD~"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ud+:;tr^FT4?/~/.}re;"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="Zcbhh):k#-OYBiIWh~/o"><field name="NUM">0</field></shadow><block type="argument_reporter_string" id="Ric0$ub8Sx{%UqHT;(}r"><field name="VALUE">name</field></block></value><value name="B"><shadow type="math_number" id="o[q1^-mns6mq_(-kdDrm"><field name="NUM">0</field></shadow><block type="text" id="A7F_5D8LqEvnUjnf2O%J"><field name="TEXT">BEACON</field></block></value></block></value><statement name="DO1"><block type="controls_if" id="mmMC~h85uc-Tu/+d(Wwg"><value name="IF0"><shadow type="logic_boolean" id="N,;d7IucZ*,abViy7mg~"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="JF,,|=pK`8q}g~SRJ,]("><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="XSqX8bD(7S9D7k8SHKw5"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="T!ebA^yp6Erwgcvb!6oN"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="gc;04aA?qa{uZ_?CE~#N"><field name="NUM">0</field></shadow><block type="variables_get" id="Ow5bW(E+oA51[W%_IJX;"><field name="VAR" id="@]1Ev|(WJU{rs=Wwy*mv">targetId</field></block></value><value name="B"><shadow type="math_number" id="k0S!#idOM}}Y#A,Z*+!d"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="hjSsAsub-bauYPWnZe1,"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^^~#,POAF,t+8rnk4HOz"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="`Q7S:jX=iqa7ZW{9k^,S"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="/+fUl5o+;pKJF;|y6o5I"><field name="VALUE">value</field></block></value><value name="B"><shadow type="math_number" id="=?MTQ;89HmI%0-s6ROis"><field name="NUM">0</field></shadow><block type="variables_get" id="`.uvHY.2.TOeoER_2}Nb"><field name="VAR" id="@]1Ev|(WJU{rs=Wwy*mv">targetId</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="*rUVfBiQV$FF%Uwr6mh~"><field name="VAR" id="O8cM~^Cc`WuLJF#(lsP@">currentRSSI</field><comment pinned="false" h="80" w="160">Update the raw global variable</comment><value name="VALUE"><shadow type="math_number" id="9jSzN0npApV3(sl+gyr`"><field name="NUM">0</field></shadow><block type="variables_get" id="FHbvA]]%*VV)SwmJ{!0O"><field name="VAR" id="6pVvn!dba|Vn,Z=OnHH!">incomingRSSI</field></block></value><next><block type="variables_set" id="B{;g(LD@(oCbjYkuMc[["><field name="VAR" id="XZ%@b!2${Pr,%yQjhLZH">lastBeaconTime</field><data>{"commentRefs":[],"fieldData":{}}</data><value name="VALUE"><shadow type="math_number" id="mRylrF4rk(112x)QV6tY"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="l{|)L!7G!A)Wkm}%)z/_"></block></value></block></next></block></statement></block></statement><value name="IF2"><shadow type="logic_boolean" id="}o26c{-Tk#]25pvs9gr="><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="pc##v6NK.ZAZW?ME9PA6"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="BKJa66WZ.Rs33HD/%IK/"><field name="NUM">0</field></shadow><block type="argument_reporter_string" id="jk0]7+fvfwUK`2V0s9@5"><field name="VALUE">name</field></block></value><value name="B"><shadow type="math_number" id="_*-xnPMi$($ef@Z1sG#v"><field name="NUM">0</field></shadow><block type="text" id="7woRjJ[|3jebw(B2^AkI"><field name="TEXT">SAFE</field></block></value></block></value><statement name="DO2"><block type="controls_if" id="eqY?l,eOW:Y7_OsJL0F;"><value name="IF0"><shadow type="logic_boolean" id="dh-INh!N=|+%ynX7K69K"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="3;*aC+fLKCYoQep?q`^G"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="-xC6ccy$rk{tRvFcJ*S-"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="w{9g7G6$xtov6b6mxHW9"><field name="VALUE">value</field></block></value><value name="B"><shadow type="math_number" id=",DW4akCr%gl^6*[X_qFA"><field name="NUM">0</field></shadow><block type="variables_get" id="utYfric_y|rG{c16)^iQ"><field name="VAR" id="@]1Ev|(WJU{rs=Wwy*mv">targetId</field></block></value></block></value><statement name="DO0"><block type="function_call" id="z{NZIS/+(;}A%4WX,k=Q"><mutation name="resetSystem" functionid="gB9oIXO@EB{zOtYqfk.`"></mutation></block></statement></block></statement></block></next></block></next></block></statement></block><block type="function_definition" id="0Ip_qN}_hyql:Vv`8}yo" x="2372" y="20"><mutation name="driveWhileHot" functionid="!|fPme,JYIBu4q$T4a1|"><arg name="startSignal" id="isztoklhipn5twwo5t9aw" type="number"></arg></mutation><field name="function_name">driveWhileHot</field><comment pinned="false" h="80" w="160">Moves forward as long as signal is Good or Getting Better</comment><value name="isztoklhipn5twwo5t9aw"><block type="argument_reporter_number" id="m!}ju8=-mz(4yP}c6%X," deletable="false"><field name="VALUE">startSignal</field></block></value><statement name="STACK"><block type="cuteBot_colorLight" id="M:994)1z|9[`%j~AwOo9"><field name="light">cuteBot.RGBLights.ALL</field><comment pinned="false" h="80" w="160">Blue</comment><value name="color"><shadow type="colorNumberPicker" id="Uf{%-:Fwp^@`LT-KC;b-"><field name="value">0x0000ff</field></shadow></value><next><block type="MotorRun" id="9H+):^JwivLjM;e].*b4"><comment pinned="false" h="80" w="160">Drive forward</comment><value name="lspeed"><shadow type="math_number_minmax" id="jL:sW@C4}q+i1e0,x9q."><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">25</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="Z,tcZr:Q70)#T@4O3#;C"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">25</field></shadow></value><next><block type="controls_repeat_ext" id="6,[RP0Rh}wQ|J|7awf#2"><comment pinned="false" h="80" w="160">Drive for up to 1.5 seconds, checking signal every 200ms</comment><value name="TIMES"><shadow type="math_whole_number" id="Fg6uJ3uv;%~I4T#2WAD("><field name="NUM">8</field></shadow></value><statement name="DO"><block type="device_pause" id="Cl9fN+sUD`,Hv3cWDIn/"><value name="pause"><shadow type="timePicker" id="8Ncof0tM}K52K.VK}`K-"><field name="ms">200</field></shadow></value><next><block type="controls_if" id="C;gT_uLt3!hA#DBK)87v"><comment pinned="false" h="80" w="160">Safety stop</comment><value name="IF0"><shadow type="logic_boolean" id="~E9P*vF;4r9K/7Vvz`$~"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Gl:m{fzt:0mF35D_S)d?"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field></block></value><statement name="DO0"><block type="function_return" id="0O0GQ3V[fwI]{q[HxgST"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></statement><next><block type="variables_set" id="Z%(.c$Hv57tVi_h;JZW%"><field name="VAR" id="OMXn6z^t;g(Exv}r6ZQA">newSignal</field><value name="VALUE"><shadow type="math_number" id="uKEd+D5/OzW.edu#,iD("><field name="NUM">0</field></shadow><block type="function_call_output" id="cSjS{;4e5+8XAK/l^sBq"><mutation name="getSmoothedRSSI" functionid="z)m7xXE8a3JVEIPC-=(G"></mutation></block></value><next><block type="controls_if" id="XwCM}Idp}eAq@%OmRZP/"><comment pinned="false" h="80" w="160">Arrived check</comment><value name="IF0"><shadow type="logic_boolean" id="MyQ)@^H`GW;J63tm1ifa"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=".hprE/xvfJMb=u9i/-F0"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="{P*GqKd?{hnnoX~He8Ew"><field name="NUM">0</field></shadow><block type="variables_get" id="}b5jhsf1N.[)QB@,};HE"><field name="VAR" id="OMXn6z^t;g(Exv}r6ZQA">newSignal</field></block></value><value name="B"><shadow type="math_number" id=":QMP=vd#SuGzd$F/t$K{"><field name="NUM">0</field></shadow><block type="variables_get" id="9/d!v41oK}Y*Sy8T*-M8"><field name="VAR" id="s1[*zyFw;4o8{iRiB0=y">RSSI_ARRIVED_THRESH</field></block></value></block></value><statement name="DO0"><block type="function_return" id="W#*3owyr,zvx^-:X-]n("><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation><comment pinned="false" h="80" w="160">Exit, the main loop will catch the success</comment></block></statement><next><block type="controls_if" id="`,ZG6dk+Nz+apRtC)XCI"><comment pinned="false" h="80" w="160">CRITICAL LOGIC: HOT OR COLD?
If signal dropped by more than 3 (weaker), we are going wrong way.
Example: Started at -70, now at -75. STOP.</comment><value name="IF0"><shadow type="logic_boolean" id="Sj+^[V?ET3;.O`AJzpKN"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="%O3uaQN!xXM=jgRZzAE1"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="3i/]+)FR{Kz[A@~EiJ:]"><field name="NUM">0</field></shadow><block type="variables_get" id="{JP}|$t2Zs;Pu`hkWN1{"><field name="VAR" id="OMXn6z^t;g(Exv}r6ZQA">newSignal</field></block></value><value name="B"><shadow type="math_number" id="xQ9}jaTaqZ0O~#0=}cld"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="].L*7^lR(w|swUjX6aj4"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="[@nUQMnMx_ZuPi;tkCmR"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="6.{hxG_u9?T=:b3yy!J)"><field name="VALUE">startSignal</field></block></value><value name="B"><shadow type="math_number" id="baKc|SLdsi`6z;a(kx4i"><field name="NUM">3</field></shadow></value></block></value></block></value><statement name="DO0"><block type="cutebot_stopcar" id="=/3#@Nf*-*`S6BBRVtP1"><next><block type="cuteBot_colorLight" id="+qFXVxwk)k%=_fiX2IEG"><field name="light">cuteBot.RGBLights.ALL</field><comment pinned="false" h="80" w="160">Flash Red briefly</comment><value name="color"><shadow type="colorNumberPicker" id="Ojqa;A@m[W*)e48+V%O?"><field name="value">0xff0000</field></shadow></value><next><block type="device_pause" id="vHhrb3@3tuBrQ||jD:fF"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id="N0lc=XUU,,m{1+e+)*x."><field name="ms">200</field></shadow></value><next><block type="function_return" id="h^]BKRoNB4_rXhovQ/N-"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation><comment pinned="false" h="80" w="160">Exit function to Trigger a re-scan</comment></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="l5@jcFd-7JX;D?zmLGK~"><field name="VAR" id="9cN7!O}J,Uu7.LZ8wfhV">startSignal</field><comment pinned="false" h="80" w="160">Update baseline (we are now at the new spot)</comment><value name="VALUE"><shadow type="math_number" id=":k?@iyj7[Mbo1A?I%jAG"><field name="NUM">0</field></shadow><block type="variables_get" id="[Z.00Q*?ciU6Qu^EZ.JG"><field name="VAR" id="OMXn6z^t;g(Exv}r6ZQA">newSignal</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="cutebot_stopcar" id="Wbu+!-3ah-~]07~]^W`C"></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="lREM~RB9!Id~ZIR~d+I;" x="3046" y="20"><mutation name="smartScan" functionid="I3]02$#|y:if*ZGVR:dI"></mutation><field name="function_name">smartScan</field><comment pinned="false" h="80" w="160">Scans Left and Right and returns which way is strongest</comment><statement name="STACK"><block type="cutebot_stopcar" id="l{vtp4gjq:Ac#VTlWKgX"><next><block type="MotorRun" id="PrOF}kKQ=+j+.ur=KIf;"><comment pinned="false" h="80" w="160">Check Left</comment><value name="lspeed"><shadow type="math_number_minmax" id="_N/Ua^]68_:cOS4fpRbG"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">-35</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="3%o596zh.g7:i}Vso1Jg"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">35</field></shadow></value><next><block type="device_pause" id="!p-83MU(,b1,rA1@?@|j"><value name="pause"><shadow type="timePicker" id="IOCtg_3s0=YY/EHFp#C)"><field name="ms">300</field></shadow></value><next><block type="cutebot_stopcar" id="ZGOQgxxCwp3Y6L-]ZQ@W"><next><block type="device_pause" id="+Zn5}iL?qESc5S`)cR4$"><comment pinned="false" h="80" w="160">Wait for radio to settle</comment><value name="pause"><shadow type="timePicker" id="R|~iZNU7bE_ayyT:oKVR"><field name="ms">200</field></shadow></value><next><block type="variables_set" id="DZab#vxBWdy/L#VdY,|C"><field name="VAR" id="HR1I+=YDK+n8#l9Lh?`+">leftScore</field><data>{"commentRefs":[],"fieldData":{}}</data><value name="VALUE"><shadow type="math_number" id="l/+x00eBr{~:C,r[YK.3"><field name="NUM">0</field></shadow><block type="function_call_output" id="}H54;i}7?kPWx-~[(Qnh"><mutation name="getSmoothedRSSI" functionid="z)m7xXE8a3JVEIPC-=(G"></mutation></block></value><next><block type="MotorRun" id="cB#%K5[^F$=Jr9wOJZkk"><comment pinned="false" h="80" w="160">Turn all the way to Right (Left turn + Right turn = 600ms)</comment><value name="lspeed"><shadow type="math_number_minmax" id="Yq2C(7~=9C-N4q4YTQb)"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">35</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="Q.I`ZDR}~Gp{-xi~EU!5"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">-35</field></shadow></value><next><block type="device_pause" id="*wF],f?MfBx**-%eRKp|"><value name="pause"><shadow type="timePicker" id="b;:jShvuVxd=*nhW(2,y"><field name="ms">600</field></shadow></value><next><block type="cutebot_stopcar" id="$@u.Y$ade+78SNJA9(rr"><next><block type="device_pause" id="o/B`{7,hKB]~vN7i;5F|"><value name="pause"><shadow type="timePicker" id="4A_esM{[6lEq~)nq]z~i"><field name="ms">200</field></shadow></value><next><block type="variables_set" id="egxwU1Zxl~_q-VkSDTLi"><field name="VAR" id="QhL[/R~i-(!j,_0nB1=@">rightScore</field><value name="VALUE"><shadow type="math_number" id="gi}kdgkxDxUB`;[tIUAA"><field name="NUM">0</field></shadow><block type="function_call_output" id="GiaR)6tlUL%}CS(9-n:K"><mutation name="getSmoothedRSSI" functionid="z)m7xXE8a3JVEIPC-=(G"></mutation></block></value><next><block type="MotorRun" id="=BD0PJNm*hwVUl6]JfK`"><comment pinned="false" h="80" w="160">Return to Center</comment><value name="lspeed"><shadow type="math_number_minmax" id="Fg3O$]Ac,^BX|-$/3LMt"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">-35</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="BWc09QV1W=vFnf@X~nS;"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">35</field></shadow></value><next><block type="device_pause" id="OeuUa7+|I#__18U0+wfi"><value name="pause"><shadow type="timePicker" id="H4Az;7lv!TRHgYK%H~?_"><field name="ms">300</field></shadow></value><next><block type="cutebot_stopcar" id="}0C];Fy94X8!8Kljrro6"><next><block type="controls_if" id="A/:@a]NGYU9UacEkx@cg"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="80" w="160">Compare
Note: Closer to 0 is better. -60 is larger than -80.</comment><value name="IF0"><shadow type="logic_boolean" id="x2|SjgO]lAY7LxfnNRol"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="RVC=e!.cA~UX8R%hF[tf"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="l;GrUS$HRQg~T0v)K)fC"><field name="NUM">0</field></shadow><block type="variables_get" id="Y2MobNb1Ow2],i`h3ndl"><field name="VAR" id="HR1I+=YDK+n8#l9Lh?`+">leftScore</field></block></value><value name="B"><shadow type="math_number" id="nx#G(m2fL$i@^FK{5@wB"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="_O)wjn{SS_OF86SMnyS="><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="(hk0o[_YeCu{WKsFr#}c"><field name="NUM">0</field></shadow><block type="variables_get" id="f%]y8@~?E:+oi=g{-=Fa"><field name="VAR" id="QhL[/R~i-(!j,_0nB1=@">rightScore</field></block></value><value name="B"><shadow type="math_number" id="9lybTB_qXg8IxcOV=%RY"><field name="NUM">2</field></shadow></value></block></value></block></value><statement name="DO0"><block type="function_return" id="$C,5kI@tNTX^~?jao%T@"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="9Lo4uM*yz$VH)~-zT[E|"><field name="NUM">0</field></shadow><block type="text" id="c#I|]^lH5v3iJ{NVW;/i"><field name="TEXT">LEFT</field></block></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="1TK#|.@`[(Dcd_~P[8-I"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="aN4cJ]|:xPMJ+p[Gg-v]"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="-W@h/S}j+|P2Z;NLTJ~G"><field name="NUM">0</field></shadow><block type="variables_get" id=",_=ga;)FO}xz9u|y~!:v"><field name="VAR" id="QhL[/R~i-(!j,_0nB1=@">rightScore</field></block></value><value name="B"><shadow type="math_number" id="e0P)s;qHk7W~9taD)WPL"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="^?IloM$-nT/;B#,@6koA"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="vc.(8SKESY=/VR(_WiOT"><field name="NUM">0</field></shadow><block type="variables_get" id="dswi~!H*RQZi%!|#`g#}"><field name="VAR" id="HR1I+=YDK+n8#l9Lh?`+">leftScore</field></block></value><value name="B"><shadow type="math_number" id="p.hUKh~%jLP|wsL5!cv/"><field name="NUM">2</field></shadow></value></block></value></block></value><statement name="DO1"><block type="function_return" id="Y1vB*y|78rJ|.7l4.C:L"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="O*X*4Y=dpZOC{M/2D76`"><field name="NUM">0</field></shadow><block type="text" id="E](n~M|Pz]G?h,.j[y9:"><field name="TEXT">RIGHT</field></block></value></block></statement><statement name="ELSE"><block type="function_return" id="}Bhyy/ic6W1.WqX8k[-$"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="80" w="160">Roughly equal</comment><value name="RETURN_VALUE"><shadow type="math_number" id="F^s?$weUpo_QvT?3f],,"><field name="NUM">0</field></shadow><block type="text" id="r;VAWYSQHraUe]Z,-4WR"><field name="TEXT">CENTER</field></block></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="8:3oGA.4jWFYt{1?~h?9" x="3748" y="20"><mutation name="getSmoothedRSSI" functionid="z)m7xXE8a3JVEIPC-=(G"></mutation><field name="function_name">getSmoothedRSSI</field><comment pinned="false" h="80" w="160">====== HELPER: RSSI SMOOTHING ======
Takes 5 readings and averages them to remove noise</comment><statement name="STACK"><block type="controls_repeat_ext" id="Kb.n,nHQ`sKdCX;fa0r#"><comment pinned="false" h="80" w="160">Take 5 samples over 100ms</comment><value name="TIMES"><shadow type="math_whole_number" id="]!6ZsXD#3kp5-jW4n{^+"><field name="NUM">5</field></shadow></value><statement name="DO"><block type="controls_if" id="{_?%BIc2CiW(c[oRvy`S"><comment pinned="false" h="80" w="160">Only add if we have a valid recent signal</comment><value name="IF0"><shadow type="logic_boolean" id="Dkq3eW*.V#Sj?,dQ.1:`"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="3.VIq*@3k8@r]?eelOXH"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="xiNjA3?@-poN%)lJCHi/"><field name="NUM">0</field></shadow><block type="variables_get" id="``9)HSq8jspK/wVIh`2n"><field name="VAR" id="O8cM~^Cc`WuLJF#(lsP@">currentRSSI</field></block></value><value name="B"><shadow type="math_number" id="IeL3ZU9r}{@Nf0K,h~xR"><field name="NUM">-100</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="^OV?v(,e6wiGH?A#`YTL"><field name="VAR" id="Y-u`@JEr/s_]RW0$_}{{">sum</field><value name="VALUE"><shadow type="math_number" id="wUpTthbW_,kh|cU)F_jp"><field name="NUM">0</field></shadow><block type="variables_get" id="`G0V:+zjPr[x.ZqF8N%w"><field name="VAR" id="O8cM~^Cc`WuLJF#(lsP@">currentRSSI</field></block></value><next><block type="variables_change" id="m5guHd5ikYVgqx.,Vhyb"><field name="VAR" id="|3!HfBThC{%:Z9,Ke,UG">count</field><value name="VALUE"><shadow type="math_number" id="MaKLtp3lR`-EB/ID^y3!"><field name="NUM">1</field></shadow></value></block></next></block></statement><next><block type="device_pause" id="1Wc#pC(Eo%%70Qs(A2]{"><value name="pause"><shadow type="timePicker" id="sMX#YGbA,3gA44ct%Xju"><field name="ms">20</field></shadow></value></block></next></block></statement><next><block type="controls_if" id="s105sl1Q5b/rdUJCw;@R"><comment pinned="false" h="80" w="160">If no signal, return a very low number</comment><value name="IF0"><shadow type="logic_boolean" id="q%4)=~YuJx{0Z4XnafLu"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="[gwAj*Nzo:*2FOz`0oBp"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="bbrJi5lH[dw+:?z~_)~q"><field name="NUM">0</field></shadow><block type="variables_get" id="rRwEex%6sJJWjM^Y[}P^"><field name="VAR" id="|3!HfBThC{%:Z9,Ke,UG">count</field></block></value><value name="B"><shadow type="math_number" id="he5|:H8GB?,HZ6Qf4X5]"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="2)*$@.$]vYkVqg/=IpIj"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="cYyXf%8Az@vqpp[#IN0F"><field name="NUM">-100</field></shadow></value></block></statement><next><block type="function_return" id="lMw}qe{{$#:6(tRjVF0n"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="0]C=eDWAfY(5V0kjW/;f"><field name="NUM">0</field></shadow><block type="math_js_round" id="oK^[2hMF[~@v`1WBSLBU"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="5_vL3+2tEQ_Sf9g;1@5z"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="PE55$mC0ac}q(^3H1L`!"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="S5z7i5_SQH(X(Q#,.eFk"><field name="NUM">0</field></shadow><block type="variables_get" id="T*Yi@[*NY9bZ$t$Jg!44"><field name="VAR" id="Y-u`@JEr/s_]RW0$_}{{">sum</field></block></value><value name="B"><shadow type="math_number" id="H#5*uSzo3!fX`@$4+L_g"><field name="NUM">0</field></shadow><block type="variables_get" id="%ysae~;k/[S!iXWgz$be"><field name="VAR" id="|3!HfBThC{%:Z9,Ke,UG">count</field></block></value></block></value></block></value></block></next></block></next></block></statement></block><block type="function_definition" id=";eNM4nG,CnIhIuecDmdW" x="20" y="1210"><mutation name="becomeVictim" functionid="J!A}Sd%QqdA%*Q7GW4H("></mutation><field name="function_name">becomeVictim</field><statement name="STACK"><block type="variables_set" id="blmI2M92.vPwT,fgSbrV"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field><value name="VALUE"><shadow type="math_number" id="im@g?5E76D}8+HX3Vv$O"><field name="NUM">0</field></shadow><block type="logic_boolean" id="~rjuyt.]--_W!2b`cf8W"><field name="BOOL">TRUE</field></block></value><next><block type="variables_set" id="+##+u8wUw@HQ?o{Helwj"><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field><value name="VALUE"><shadow type="math_number" id="B];!]M}UJKw%t9KCdFTn"><field name="NUM">0</field></shadow><block type="logic_boolean" id="YAB%IGV2:R.]Yx^@u8M]"><field name="BOOL">FALSE</field></block></value><next><block type="cutebot_stopcar" id="ABq!no/UiQ(#40:$Gaao"><next><block type="cuteBot_colorLight" id="[F?Zm6jTPeb-M,`NhycQ"><field name="light">cuteBot.RGBLights.ALL</field><value name="color"><shadow type="colorNumberPicker" id="dm%?H1EZ;Q52kBBkGokn"><field name="value">0xff0000</field></shadow></value><next><block type="basic_show_icon" id="FyJ6/CKO)@LL9`U,;N(Z"><field name="i">IconNames.Sad</field><next><block type="radio_datagram_send_value" id="RU-G8L3+D:XrsMElO$zF"><value name="name"><shadow type="text" id="wb-0Ql9`npL~L]NF$w*5"><field name="TEXT">ALERT</field></shadow></value><value name="value"><block type="variables_get" id="5}KNR.TUW86?b.G}(bd_"><field name="VAR" id="Ma{5GoozN/A0d11sx7h}">MY_SERIAL</field></block></value><next><block type="typescript_statement" id="NmCKDo=FhNYE.VgK8SuZ"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="control.runInParallel(function () {" line1="        while (isDistressMode) {" line2="            radio.sendValue(&quot;BEACON&quot;, MY_SERIAL);" line3="            soundExpression.sad.play();" line4="            if (Math.randomBoolean()) radio.sendValue(&quot;ALERT&quot;, MY_SERIAL);" line5="            basic.pause(500);" line6="        }" line7="    });" numlines="8"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="7dykdU,pHL4zJMVtylhe" x="748" y="1210"><mutation name="becomeSafe" functionid="gIwrgDaxrrbT:HJk8j[%"></mutation><field name="function_name">becomeSafe</field><statement name="STACK"><block type="variables_set" id="f$4d6*$ly{arxMm8]E8]"><field name="VAR" id=":3(P~D/fvFmBVKypE*r$">isDistressMode</field><value name="VALUE"><shadow type="math_number" id="##%EEwmMUAQ+hMXS^tSU"><field name="NUM">0</field></shadow><block type="logic_boolean" id="o5,`OTK~TZzJ;}@Y6!Ke"><field name="BOOL">FALSE</field></block></value><next><block type="radio_datagram_send_value" id="fST.usIWsaQsofswt.)a"><value name="name"><shadow type="text" id="Rk^aS|lpG6]zo%R10(Xc"><field name="TEXT">SAFE</field></shadow></value><value name="value"><block type="variables_get" id="1zUNXiHi![[X#%_D^RH5"><field name="VAR" id="Ma{5GoozN/A0d11sx7h}">MY_SERIAL</field></block></value><next><block type="function_call" id="}p%0@=$h9~!`OyEkyWu;"><mutation name="resetSystem" functionid="gB9oIXO@EB{zOtYqfk.`"></mutation></block></next></block></next></block></statement></block><block type="function_definition" id="bo?qW)r#[0D3v#Y(|/{m" x="1194" y="1210"><mutation name="startRescueRoutine" functionid="z[)ADJt5Yt-0s2|~0mWS"></mutation><field name="function_name">startRescueRoutine</field><data>0</data><statement name="STACK"><block type="variables_set" id="6q|fy=4$S~9e4||2]iqU"><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field><value name="VALUE"><shadow type="math_number" id="!tF!%LQghEoAkH##6^G("><field name="NUM">0</field></shadow><block type="logic_boolean" id="|Q{xM?[u#i#![1F@)dU_"><field name="BOOL">TRUE</field></block></value><next><block type="basic_show_icon" id="01-fh9+^#wyM1p)jxiOV"><field name="i">IconNames.Diamond</field><comment pinned="false" h="80" w="160">Icon: Searching</comment><next><block type="cuteBot_colorLight" id="O-O~p14B2o?X.V6F@Z}."><field name="light">cuteBot.RGBLights.ALL</field><comment pinned="false" h="80" w="160">Yellow</comment><value name="color"><shadow type="colorNumberPicker" id="0sb3P*+bjq%g!X(.zHKp"><field name="value">0xffff00</field></shadow></value><next><block type="variables_set" id="Stkm)MVRy2Lcod!D/svN"><field name="VAR" id=")!^lz7al^`d+Cd_SUL}J">searchStartTime</field><data>{"commentRefs":[],"fieldData":{}}</data><value name="VALUE"><shadow type="math_number" id="J%Uf}RLP`tc35]/8#/W#"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="om9r~n5k|3xh4A%bqC6j"></block></value><next><block type="device_while" id="oVPp0pe}hYNDifj;efME"><value name="COND"><shadow type="logic_boolean" id="pLEtn;XAiU#vZmL;~l%w"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="2:G|d[BZkm{*-{Fmem^$"><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field></block></value><statement name="DO"><block type="controls_if" id="5iJ$MZ]a`Mvi+[ND+VIZ"><comment pinned="false" h="80" w="160">Timeout check</comment><value name="IF0"><shadow type="logic_boolean" id="*Jbl4tzL4K@){r|lp|^`"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="$S9.7Jb}djGK%z:9#!yi"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="dQvNE)blYl3jbPt[xlfr"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="5xO(qphGsxQRHQ,SROYn"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="|p!l1!$^X$`@t9,U,cJ,"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="9uEzWELPZ{fJJa!b]xY["></block></value><value name="B"><shadow type="math_number" id=")XjN*^qjwULxJZWNt{`y"><field name="NUM">0</field></shadow><block type="variables_get" id="{?bDsSfeEAA,b6,yw}5l"><field name="VAR" id=")!^lz7al^`d+Cd_SUL}J">searchStartTime</field></block></value></block></value><value name="B"><shadow type="math_number" id="|TTt6jCO{tSYfY!zzp$!"><field name="NUM">0</field></shadow><block type="variables_get" id="Y0VET,P6GEu=J.lQS9=n"><field name="VAR" id=";y}qIJzoiKZ`4=pPtSxY">MAX_SEARCH_TIME</field></block></value></block></value><statement name="DO0"><block type="break_keyword" id="+e7n@^CG[yqb3G1Qi`P#"><comment pinned="false" h="80" w="160">Give up</comment></block></statement><next><block type="variables_set" id="KrZ^M4[fA/`#`o;+ATL}"><field name="VAR" id="5f`3Xaz`#bg^#wdR=4[]">initialSignal</field><comment pinned="false" h="80" w="160">1. Get a clean baseline reading</comment><value name="VALUE"><shadow type="math_number" id="aw!s;]9APJc0.PhK7o;]"><field name="NUM">0</field></shadow><block type="function_call_output" id="b@Cop5ahXUs9KuNC3ECz"><mutation name="getSmoothedRSSI" functionid="z)m7xXE8a3JVEIPC-=(G"></mutation></block></value><next><block type="controls_if" id="sIeRO3|*lGt:YF3WL%8u"><comment pinned="false" h="80" w="160">2. CHECK: Are we there yet?</comment><value name="IF0"><shadow type="logic_boolean" id="3VD~yR_a~8iAb{*G9M`="><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="#aY+%0NW-@uR4Fu.L)@l"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="M~+fTZ3X.bz%k7!nxNXH"><field name="NUM">0</field></shadow><block type="variables_get" id="Lj~`;:)wuG::_YsCU)*1"><field name="VAR" id="5f`3Xaz`#bg^#wdR=4[]">initialSignal</field></block></value><value name="B"><shadow type="math_number" id=")#7yRYmkTx,fQp[WLkYs"><field name="NUM">0</field></shadow><block type="variables_get" id="g{WCU.GGemu1@.3Q@92A"><field name="VAR" id="s1[*zyFw;4o8{iRiB0=y">RSSI_ARRIVED_THRESH</field></block></value></block></value><statement name="DO0"><block type="function_call" id="t.=BDt+hlBA/-:*j9O$K"><mutation name="missionSuccess" functionid="i/Ks)vp_iQCOj.{Z{!r!"></mutation><next><block type="function_return" id="zZ3RCuUU_herKGit3#]%"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></next></block></statement><next><block type="variables_set" id="TdIBLlK;P~?Ne}.(|0|M"><field name="VAR" id="tG?JpSqhE+3}ZnhN8J_O">bestDir</field><comment pinned="false" h="80" w="160">3. DECISION: Scan to find the best direction
We look Left, Center, Right</comment><value name="VALUE"><shadow type="math_number" id="x9XB4H-xR/nq|mw,%}^B"><field name="NUM">0</field></shadow><block type="function_call_output" id="orQs2n]M;[1Jqth:tQ*v"><mutation name="smartScan" functionid="I3]02$#|y:if*ZGVR:dI"></mutation></block></value><next><block type="controls_if" id="iEgmVyTTeXiprLusBpjV"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">4. Turn toward best direction</comment><value name="IF0"><shadow type="logic_boolean" id="[6=F[=$c$dQa[mfWp#*)"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="OaAJhvlaib=UzgDj.=t7"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="kl;oC%]rjryd*Q{Kw,Ue"><field name="NUM">0</field></shadow><block type="variables_get" id="mYqdKJe--twlF?KI5=3l"><field name="VAR" id="tG?JpSqhE+3}ZnhN8J_O">bestDir</field></block></value><value name="B"><shadow type="math_number" id="_UUpc*XSAzWT]7+nS!1k"><field name="NUM">0</field></shadow><block type="text" id="dx`iDR[)_6DquC=vYX?u"><field name="TEXT">LEFT</field></block></value></block></value><statement name="DO0"><block type="MotorRun" id="T]Mg:wAea{pryZ!:|wnh"><comment pinned="false" h="80" w="160">Turn Left</comment><value name="lspeed"><shadow type="math_number_minmax" id="|M,$oXahLvjiLV}K?(2Z"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">-30</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="kJ{Z;|OU~iV:F5CYrI1a"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">30</field></shadow></value><next><block type="device_pause" id="Zc:kKc7F]FEF2KPV%#n0"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id="POTmON7HT+b17BRBJFxR"><field name="ms">300</field></shadow></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="o`KF]Z7Tp+`MyL_TkEq!"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="n4anQh0{8ve}3sFi#s+R"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="/0#}Ch;aC*6;D|3{gNs{"><field name="NUM">0</field></shadow><block type="variables_get" id="M,bW5J^z+[5r=d$)f}5T"><field name="VAR" id="tG?JpSqhE+3}ZnhN8J_O">bestDir</field></block></value><value name="B"><shadow type="math_number" id=",(jXsH`5qR39:Y$ds]?B"><field name="NUM">0</field></shadow><block type="text" id="4`tNV6=Em[L5iwRf{)1N"><field name="TEXT">RIGHT</field></block></value></block></value><statement name="DO1"><block type="MotorRun" id="EI?JWO?2d?HRJ3Klx+i9"><comment pinned="false" h="80" w="160">Turn Right</comment><value name="lspeed"><shadow type="math_number_minmax" id="~wjwD4.F+C,!GN^OH4c5"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">30</field></shadow></value><value name="rspeed"><shadow type="math_number_minmax" id="y{O@bxBu|{MQq`!#3Lj6"><mutation min="-100" max="100" precision="0"></mutation><field name="SLIDER">-30</field></shadow></value><next><block type="device_pause" id="yXJ|cDHhQ;A:+(f{EYG0"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id="r@1@eV^(6Z%!y9dR*?g)"><field name="ms">300</field></shadow></value></block></next></block></statement><next><block type="cutebot_stopcar" id="hq7SULErcc`NBDnY.Le2"><comment pinned="false" h="80" w="160">If "CENTER", we don't turn, we just drive.
5. DRIVE &amp; MONITOR (Hot or Cold)
We drive forward for a bit, but check if signal drops.</comment><next><block type="device_pause" id="F^xV?=S}?S^PjXHEDK@r"><value name="pause"><shadow type="timePicker" id="DI@kDqs|Swj:Je~+3cT+"><field name="ms">100</field></shadow></value><next><block type="function_call" id="mdG}GzY5+ECi5nhAQIBJ"><mutation name="driveWhileHot" functionid="!|fPme,JYIBu4q$T4a1|"><arg name="startSignal" id="isztoklhipn5twwo5t9aw" type="number"></arg></mutation><value name="isztoklhipn5twwo5t9aw"><shadow type="math_number" id="40!09,fPN`/K-%RY=_}5"><field name="NUM">1</field></shadow><block type="variables_get" id="wXdT-nM:z%BtW.wF-ON0"><field name="VAR" id="5f`3Xaz`#bg^#wdR=4[]">initialSignal</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="function_call" id="!fn:Sk+fYIv-huR0riW="><mutation name="resetSystem" functionid="gB9oIXO@EB{zOtYqfk.`"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="|SW3WO-d|QW{)W|::UAz" x="2110" y="1210"><mutation name="missionSuccess" functionid="i/Ks)vp_iQCOj.{Z{!r!"></mutation><field name="function_name">missionSuccess</field><statement name="STACK"><block type="cutebot_stopcar" id="m92M9H(@)95_dZe}^6[R"><next><block type="controls_repeat_ext" id="HiTq0pu-!pZcpSNwrl$6"><value name="TIMES"><shadow type="math_whole_number" id="iE7[TK17eh/ZQDT2W[^m"><field name="NUM">3</field></shadow></value><statement name="DO"><block type="cuteBot_colorLight" id="U)bybOto*{KaP01hHtZ:"><field name="light">cuteBot.RGBLights.ALL</field><comment pinned="false" h="80" w="160">Green</comment><value name="color"><shadow type="colorNumberPicker" id="rY3l)liusVAzG]6@,p:z"><field name="value">0x00ff00</field></shadow></value><next><block type="basic_show_icon" id="Ppi8;#w)zQ(t:5]zGjxo"><field name="i">IconNames.Heart</field><data>{"commentRefs":[],"fieldData":{}}</data><next><block type="device_pause" id="UJOsL6a@=bTe^BCa?HE+"><value name="pause"><shadow type="timePicker" id="S|UjV[}t:EsJ`?;F-S!A"><field name="ms">200</field></shadow></value><next><block type="cuteBot_colorLight" id="#A)*ong5hEm-PJ@$|Ud/"><field name="light">cuteBot.RGBLights.ALL</field><value name="color"><shadow type="colorNumberPicker" id="AzThQ_o$SpL_7Q-cz+}f"><field name="value">0x000000</field></shadow></value><next><block type="device_pause" id=")9%Ym4OTHkWbcuRW!e},"><value name="pause"><shadow type="timePicker" id="$r9g2B%GP;q=AZ)O!};["><field name="ms">200</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type="function_definition" id="84u7uS$6TCBZwA6;}2x~" x="2574" y="1210"><mutation name="resetSystem" functionid="gB9oIXO@EB{zOtYqfk.`"></mutation><field name="function_name">resetSystem</field><statement name="STACK"><block type="cutebot_stopcar" id="2*Uw3YKxgP=2B:lp%lr$"><next><block type="function_call" id="yU)f^Q#unx#GDD]*OL/e"><mutation name="calmLights" functionid="47Q2BVG5eHVkeh%W51mC"></mutation><next><block type="device_pause" id="_#}B`_X=N_*`$=+u+cs["><comment pinned="false" h="80" w="160">Cooldown for accelerometer</comment><value name="pause"><shadow type="timePicker" id="KJ)9a;Phlz2l]a8F-}G3"><field name="ms">1000</field></shadow></value><next><block type="variables_set" id="TM^15qyxP5c_qu5Pqeie"><field name="VAR" id="8,iKCHvExL##NW_6QHA9">isRescuing</field><data>{"commentRefs":[],"fieldData":{}}</data><value name="VALUE"><shadow type="math_number" id="x8Gj7*9px^I$/cFI9=QO"><field name="NUM">0</field></shadow><block type="logic_boolean" id="|DziMU.?1YIy4[NhKwmd"><field name="BOOL">FALSE</field></block></value><next><block type="variables_set" id="emtH~R6it*j9~T8Bps7K"><field name="VAR" id="@]1Ev|(WJU{rs=Wwy*mv">targetId</field><value name="VALUE"><shadow type="math_number" id="M4Hh_h#43x$l4|23gyW2"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="ef;yBYR[#?b+jNli+DNA" x="2968" y="1210"><mutation name="calmLights" functionid="47Q2BVG5eHVkeh%W51mC"></mutation><field name="function_name">calmLights</field><statement name="STACK"><block type="cuteBot_colorLight" id="mvP6EYl}9q?6fnV{[,(:"><field name="light">cuteBot.RGBLights.ALL</field><value name="color"><shadow type="colorNumberPicker" id="-BU2nR4Ogn{{Gb)^35LI"><field name="value">0x00ff00</field></shadow></value><next><block type="basic_show_icon" id="xa(e}el6kDZ!;^^7[3iO"><field name="i">IconNames.Happy</field></block></next></block></statement></block></xml>